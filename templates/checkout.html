{% extends base_template %}
{% block contenido %}
<div style="display:flex;justify-content:center;align-items:center;min-height:70vh;">
  <form method="POST" action="/checkout" id="checkout-form" style="background:#fff;max-width:480px;width:100%;padding:32px 32px 24px 32px;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.10);">
    <div style="font-size:1.2rem;font-weight:bold;margin-bottom:18px;text-align:center;">Finalizar Pedido</div>
    <div style="margin-bottom:16px;">
      <label for="nombre" style="font-weight:600;">Nombre:</label>
      <input type="text" name="nombre" id="nombre" required style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
    </div>
    <div style="margin-bottom:16px;">
      <label for="direccion" style="font-weight:600;">Dirección:</label>
      <input type="text" name="direccion" id="direccion" required style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
    </div>
    <div style="margin-bottom:16px;">
      <label for="colonia" style="font-weight:600;">Colonia:</label>
      <select name="colonia" id="colonia" required style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
        <option value="">Selecciona tu colonia</option>
        <optgroup label="Envío desde $50">
          <option value="VILLAS CHALCO">VILLAS CHALCO</option>
          <option value="PORTAL CHALCO">PORTAL CHALCO</option>
          <option value="VOLCANES">VOLCANES</option>
          <option value="VOLCANES 2">VOLCANES 2</option>
          <option value="TERRA">TERRA</option>
          <option value="MARCO ANTONIO SOSA">MARCO ANTONIO SOSA</option>
        </optgroup>
        <optgroup label="Envío desde $100">
          <option value="LA CONCHITA">LA CONCHITA</option>
          <option value="BARRIO SAN ANTONIO">BARRIO SAN ANTONIO</option>
          <option value="LA ZAPATA">LA ZAPATA</option>
          <option value="PASEOS CHALCO">PASEOS CHALCO</option>
          <option value="MARGARITA MORAN">MARGARITA MORAN</option>
          <option value="SAN MARTIN XICO NUEVO">SAN MARTIN XICO NUEVO</option>
          <option value="SAN LORENZO CHIMALPA">SAN LORENZO CHIMALPA</option>
          <option value="SAN MATEO HUITZILZINGO">SAN MATEO HUITZILZINGO</option>
          <option value="SAN PABLO">SAN PABLO</option>
        </optgroup>
        <option value="OTRO">No está mi colonia</option>
      </select>
    </div>
    <div style="margin-bottom:16px;">
      <label for="telefono" style="font-weight:600;">Teléfono:</label>
      <input type="text" name="telefono" id="telefono" required style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
    </div>
    <div style="margin-bottom:16px;">
      <label for="numero_cliente" style="font-weight:600;">Número de cliente (opcional):</label>
      <input type="text" name="numero_cliente" id="numero_cliente" placeholder="Ej. 5020003" style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
    </div>
    <div style="margin-bottom:16px;">
      <label for="pago" style="font-weight:600;">Forma de pago:</label>
      <select name="pago" id="pago" required style="width:100%;padding:10px 12px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:1rem;">
        <option value="">Selecciona una opción</option>
        <option value="Efectivo">Efectivo</option>
        <option value="Transferencia">Transferencia</option>
        <option value="Tarjeta">Tarjeta (CONTRA ENTREGA)</option>
      </select>
    </div>
    <input type="hidden" name="carrito_json" id="carrito_json">
    <button type="submit" style="width:100%;background:#43a047;color:#fff;font-weight:bold;padding:14px 0;border:none;border-radius:8px;font-size:1.1rem;box-shadow:0 2px 8px rgba(67,160,71,0.08);margin-top:10px;transition:background 0.2s;">✅ Enviar Pedido</button>
  </form>
</div>
<script>
// Guardar el carrito en el campo oculto antes de enviar
const form = document.getElementById('checkout-form');
if(form) {
  form.addEventListener('submit', function(e) {
    document.getElementById('carrito_json').value = localStorage.getItem('carrito') || '[]';
  });
}
</script>
{% endblock %}
